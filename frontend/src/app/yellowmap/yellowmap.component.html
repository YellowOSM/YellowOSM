<div class="yosm__container">
  <mat-toolbar color="secondary" class="search__toolbar mat-elevation-z3" #toolbarElement>
    <a href="/" class="search__logo-wrapper">
      <img class="search__logo" src="assets/img/logo.svg" alt="YellowOSM - Open Locations">
    </a>
    <mat-form-field [floatLabel]="'never'" class="search__input">
      <input type="text" matInput placeholder="z.B. Café, Apotheke, Bankomat, Bar..." [formControl]="searchFormControl"
             [matAutocomplete]="auto" #searchInput [matAutocompleteConnectedTo]="origin"
             (keydown.enter)="searchElasticSearch()">
    </mat-form-field>

    <div class="search__button">
      <mat-icon *ngIf="searchFormControl.value" (click)="removeSearchText()" class="search__clear">close</mat-icon>
      <mat-icon (click)="searchElasticSearch()">search</mat-icon>
    </div>

  </mat-toolbar>

  <div class="yosm__autocomplete-wrapper" matAutocompleteOrigin #origin="matAutocompleteOrigin"></div>

  <mat-autocomplete #auto="matAutocomplete" panelWidth="100%" class="mat-elevation-z3">
    <mat-option *ngFor="let option of filteredOptions | async" [value]="option" (click)="searchElasticSearch()">
      {{option}}
    </mat-option>
  </mat-autocomplete>

  <div class="map__wrapper">
    <div id="map" class="map" #mapElement></div>
    <div class="map__beta-sleeve mat-elevation-z2">BETA</div>
    <button mat-fab (click)="getLocation()" class="map__location-button">
      <mat-icon aria-label="Position finden">gps_fixed</mat-icon>
    </button>
    <div class="map__link map__osm-link">
      <a
        href="https://osm.org/#map={{previousUrlParams['zoom']}}/{{previousUrlParams['lat']}}/{{previousUrlParams['lon']}}"
        target="_blank">
        in OSM ansehen
      </a>
    </div>
    <div class="map__link map__contrib-link">
      © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors
    </div>
  </div>
</div>

<app-location-detail [feature]="selectedFeature" [className]="getLocationClasses()"
                     (panup)="onPanUp($event)" (pandown)="onPanDown($event)"
></app-location-detail>

